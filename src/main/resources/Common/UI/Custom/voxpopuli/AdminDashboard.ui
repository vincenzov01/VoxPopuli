$C = "../Common.ui";

// Admin UI uses flat colors (no parchment textures)

@PanelBg = #10151e(0.7);
@CardBg = #10151e(0.85);

@SidebarUsernameStyle = LabelStyle(FontSize: 18, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center);
@SidebarRoleStyle = LabelStyle(FontSize: 12, TextColor: #b4c8c9, HorizontalAlignment: Center, VerticalAlignment: Center);
@ContentTitleStyle = LabelStyle(FontSize: 20, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center);

@CardHeaderStyle = LabelStyle(FontSize: 18, TextColor: #ffffff(0.92), RenderBold: true);
@RowLabelStyle = LabelStyle(FontSize: 14, TextColor: #e8f0f2(0.92), VerticalAlignment: Center);
@RowValueStyle = LabelStyle(FontSize: 13, TextColor: #b4c8c9(0.92), HorizontalAlignment: Center, VerticalAlignment: Center);
@StatusLabelStyle = LabelStyle(FontSize: 13, TextColor: #b4c8c9, VerticalAlignment: Center);
@HintLabelStyle = LabelStyle(FontSize: 12, TextColor: #b4c8c9(0.75), VerticalAlignment: Center, HorizontalAlignment: End, Wrap: true);
@NoteLabelStyle = LabelStyle(FontSize: 12, TextColor: #b4c8c9, Wrap: true);
@LogsTextStyle = LabelStyle(FontSize: 12, TextColor: #e8f0f2(0.90), Wrap: true);

@Card = Group {
  @Title = "";

  LayoutMode: Top;
  Background: @CardBg;
  Padding: (Full: 18);
  Anchor: (Left: 6, Right: 6, Top: 6, Bottom: 6);

  Label {
    Text: @Title;
    Anchor: (Height: 22);
    Style: @CardHeaderStyle;
  }
  Group { Anchor: (Height: 8); }

  Group #Content {
    LayoutMode: Top;
    Anchor: (Left: 0, Right: 0);
  }
};

@ToggleRowInner = Group {
  @LabelText = "";

  LayoutMode: Left;
  Anchor: (Full: 0);

  Label {
    Text: @LabelText;
    FlexWeight: 1;
    Style: @RowLabelStyle;
  }

  Group #ValueSlot {
    Anchor: (Width: 50, Height: 38);
  }

  Group #ButtonSlot {
    Anchor: (Width: 120, Height: 38);
  }
};

@ItemIdRowInner = Group {
  @HintText = "Usato solo se ON";

  LayoutMode: Left;
  Anchor: (Full: 0);

  Group #InputSlot {
    FlexWeight: 1;
    Anchor: (Height: 38);
  }

  Group { Anchor: (Width: 12, Height: 44); }

  Label {
    Text: @HintText;
    Anchor: (Width: 160, Height: 44);
    Style: @HintLabelStyle;
  }
};

@SingleActionBarInner = Group {
  LayoutMode: Left;
  Anchor: (Full: 0);

  Group #ButtonSlot {
    Anchor: (Width: 180, Height: 44);
  }

  Group { Anchor: (Width: 12, Height: 44); }

  Group #StatusSlot {
    FlexWeight: 1;
    Anchor: (Height: 44);
  }
};

@DualActionBarInner = Group {
  LayoutMode: Left;
  Anchor: (Full: 0);

  Group #Button1Slot {
    Anchor: (Width: 180, Height: 44);
  }

  Group { Anchor: (Width: 12, Height: 44); }

  Group #Button2Slot {
    Anchor: (Width: 180, Height: 44);
  }

  Group { Anchor: (Width: 12, Height: 44); }

  Group #StatusSlot {
    FlexWeight: 1;
    Anchor: (Height: 44);
  }
};

Group {
  Anchor: (Full: 0);
  Background: #141c26(0);
  LayoutMode: Left;

  // Sidebar sinistra
  $C.@Container #Sidebar {
    Anchor: (Top: 20, Bottom: 20, Left: 20, Right: 20, Width: 240);

    Group #Title {
      Anchor: (Top: 0, Left: 0, Right: 0, Height: 54);
      Padding: (Top: 7);

      Label #Username {
        Text: "Username";
        Anchor: (Left: 0, Right: 0, Height: 31);
        Style: @SidebarUsernameStyle;
      }

      Label #RoleRole {
        Text: "Admin";
        Anchor: (Top: 31, Left: 0, Right: 0, Height: 20);
        Style: @SidebarRoleStyle;
      }
    }

    Group #Content {
      Anchor: (Top: 54, Bottom: 0, Left: 0, Right: 0);
      LayoutMode: Top;
      Padding: (Full: 10);

      // Nav
      Group #TabNav {
        LayoutMode: Center;
        Anchor: (Left: 0, Right: 0);
        FlexWeight: 1;

        Group #TabNavButtons {
          Anchor: (Width: 200);
          LayoutMode: Top;

          $C.@TextButton #TabConfig {
            @Text = "Configurazione";
            @Anchor = (Width: 200);
          }

          Group { Anchor: (Height: 6); }

          $C.@TextButton #TabLogs {
            @Text = "Log Admin";
            @Anchor = (Width: 200);
          }

          Group { Anchor: (Height: 6); }

          $C.@TextButton #TabPosts {
            @Text = "Post";
            @Anchor = (Width: 200);
          }

          Group { Anchor: (Height: 6); }

          $C.@TextButton #TabMessages {
            @Text = "Messaggi";
            @Anchor = (Width: 200);
          }

          Group { Anchor: (Height: 6); }

          $C.@TextButton #TabGuilds {
            @Text = "Gilde";
            @Anchor = (Width: 200);
          }
        }
      }
    }
  }

  // Area contenuto destra
  $C.@Container #ContentArea {
    FlexWeight: 1;
    Anchor: (Top: 20, Bottom: 20, Left: 20, Right: 20,);

    Group #Title {
      Anchor: (Top: 0, Left: 0, Right: 0, Height: 38);
      Padding: (Top: 7);
      Label #ContentTitle {
        Text: "VoxPopuli Admin";
        Anchor: (Left: 0, Right: 0, Height: 31);
        Style: @ContentTitleStyle;
      }
    }

    Group #Content {
      Anchor: (Top: 38, Bottom: 0, Left: 0, Right: 0);
      LayoutMode: Top;
      Padding: (Full: 20);

      // Config tab content
      Group #ConfigContent {
        FlexWeight: 1;
        LayoutMode: Top;
        Anchor: (Left: 0, Right: 0);
        Visible: true;

        Group {
          FlexWeight: 1;
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Anchor: (Left: 0, Right: 0);
          Background: @PanelBg;
          Padding: (Full: 10);

          Group #AdminConfigList {
            LayoutMode: Top;
            Anchor: (Left: 0, Right: 0);

            // --- LOGS ---
            @Card {
              @Title = "LOGS";
              #Content {
                Group #RowLogsMaxFileMB {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Dimensione max file log (MB)";
                    #ValueSlot {
                      $C.@TextField #LogsMaxFileMBInput {
                        PlaceholderText: "Max log file size in MB";
                        Anchor: (Full: 0);
                      }
                    }
                  }
                }
                Group { Anchor: (Height: 6); }
                Group #RowLogsMaxFilesToKeep {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Numero max file log";
                    #ValueSlot {
                      $C.@TextField #LogsMaxFilesToKeepInput {
                        PlaceholderText: "Number of log files to keep";
                        Anchor: (Full: 0);
                      }
                    }
                  }
                }
                Group { Anchor: (Height: 12); }
              }
            }

            // --- TABS ---
            @Card {
              @Title = "TAB";
              #Content {
                Group #RowTabsCronache {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Cronache";
                    #ValueSlot {
                      Label #TabsCronacheValue {
                        Text: "ON";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #ToggleTabsCronacheButton {
                        @Text = "Disabilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }

                Group { Anchor: (Height: 6); }

                Group #RowTabsMissive {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Missive";
                    #ValueSlot {
                      Label #TabsMissiveValue {
                        Text: "ON";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #ToggleTabsMissiveButton {
                        @Text = "Disabilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }

                Group { Anchor: (Height: 6); }

                Group #RowTabsGilda {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Gilda";
                    #ValueSlot {
                      Label #TabsGildaValue {
                        Text: "ON";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #ToggleTabsGildaButton {
                        @Text = "Disabilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }
              }
            }

            // --- MESSAGES ---
            @Card {
              @Title = "MISSIVE";
              #Content {
                Group #RowMessagesAllowDelete {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Consenti eliminazione";
                    #ValueSlot {
                      Label #MessagesAllowDeleteValue {
                        Text: "ON";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #ToggleMessagesAllowDeleteButton {
                        @Text = "Disabilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }

              Group { Anchor: (Height: 6); }

              Group #RowMessagesRequireItemToSend {
                Anchor: (Left: 0, Right: 0, Height: 38);
                @ToggleRowInner {
                  @LabelText = "Richiedi oggetto per inviare";
                  #ValueSlot {
                    Label #MessagesRequireItemToSendValue {
                      Text: "OFF";
                      Anchor: (Full: 0);
                      Style: @RowValueStyle;
                    }
                  }
                  #ButtonSlot {
                    $C.@SecondaryTextButton #ToggleMessagesRequireItemToSendButton {
                      @Text = "Abilita";
                      @Anchor = (Full: 0);
                    }
                  }
                }
              }

              Group { Anchor: (Height: 6); }

              Group #MessagesRequiredItemIdToSendRow {
                Anchor: (Left: 0, Right: 0, Height: 44);
                @ItemIdRowInner {
                  #InputSlot {
                    $C.@TextField #MessagesRequiredItemIdToSendInput {
                      Anchor: (Full: 0);
                      PlaceholderText: "Item id (es: hytale:paper)";
                    }
                  }
                }
              }
              }
            }

            // --- POSTS ---
            @Card {
              @Title = "POST";
              #Content {
                Group #RowPostsRequireItemToPost {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Richiedi oggetto per pubblicare";
                    #ValueSlot {
                      Label #PostsRequireItemToPostValue {
                        Text: "OFF";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #TogglePostsRequireItemToPostButton {
                        @Text = "Abilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }

              Group { Anchor: (Height: 6); }

              Group #PostsRequiredItemIdToPostRow {
                Anchor: (Left: 0, Right: 0, Height: 44);
                @ItemIdRowInner {
                  #InputSlot {
                    $C.@TextField #PostsRequiredItemIdToPostInput {
                      Anchor: (Full: 0);
                      PlaceholderText: "Item id (es: hytale:paper)";
                    }
                  }
                }
              }
              }
            }

            // --- GUILD BOARD ---
            @Card {
              @Title = "BACHECA GILDA";
              #Content {
                Group #RowGuildBoardAllowPost {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Consenti post";
                    #ValueSlot {
                      Label #GuildBoardAllowPostValue {
                        Text: "ON";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #ToggleGuildBoardAllowPostButton {
                        @Text = "Disabilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }

              Group { Anchor: (Height: 6); }

              Group #RowGuildBoardRequireItemToPost {
                Anchor: (Left: 0, Right: 0, Height: 38);
                @ToggleRowInner {
                  @LabelText = "Richiedi oggetto per postare";
                  #ValueSlot {
                    Label #GuildBoardRequireItemToPostValue {
                      Text: "OFF";
                      Anchor: (Full: 0);
                      Style: @RowValueStyle;
                    }
                  }
                  #ButtonSlot {
                    $C.@SecondaryTextButton #ToggleGuildBoardRequireItemToPostButton {
                      @Text = "Abilita";
                      @Anchor = (Full: 0);
                    }
                  }
                }
              }

              Group { Anchor: (Height: 6); }

              Group #GuildBoardRequiredItemIdToPostRow {
                Anchor: (Left: 0, Right: 0, Height: 44);
                @ItemIdRowInner {
                  #InputSlot {
                    $C.@TextField #GuildBoardRequiredItemIdToPostInput {
                      Anchor: (Full: 0);
                      PlaceholderText: "Item id (es: hytale:book)";
                    }
                  }
                }
              }
              }
            }

            // --- GUILDS ---
            @Card {
              @Title = "GILDE";
              #Content {
                Group #RowGuildsRequireItemToCreate {
                  Anchor: (Left: 0, Right: 0, Height: 38);
                  @ToggleRowInner {
                    @LabelText = "Richiedi oggetto per creare";
                    #ValueSlot {
                      Label #GuildsRequireItemToCreateValue {
                        Text: "OFF";
                        Anchor: (Full: 0);
                        Style: @RowValueStyle;
                      }
                    }
                    #ButtonSlot {
                      $C.@SecondaryTextButton #ToggleGuildsRequireItemToCreateButton {
                        @Text = "Abilita";
                        @Anchor = (Full: 0);
                      }
                    }
                  }
                }

              Group { Anchor: (Height: 6); }

              Group #GuildsRequiredItemIdToCreateRow {
                Anchor: (Left: 0, Right: 0, Height: 44);
                @ItemIdRowInner {
                  #InputSlot {
                    $C.@TextField #GuildsRequiredItemIdToCreateInput {
                      Anchor: (Full: 0);
                      PlaceholderText: "Item id (es: hytale:paper)";
                    }
                  }
                }
              }
              }
            }

            // --- ACTIONS ---
            Group {
              Anchor: (Left: 6, Right: 6, Height: 44);
              @DualActionBarInner {
                #Button1Slot {
                  $C.@SecondaryTextButton #SaveConfigButton {
                    @Text = "Salva";
                    @Anchor = (Full: 0);
                  }
                }

                #Button2Slot {
                  $C.@TextButton #ReloadConfigButton {
                    @Text = "Ricarica";
                    @Anchor = (Full: 0);
                  }
                }

                #StatusSlot {
                  Label #SaveStatusLabel {
                    Text: "";
                    Anchor: (Full: 0);
                    Style: @StatusLabelStyle;
                  }
                }
              }
            }

            Group { Anchor: (Height: 6); }

            Label {
              Text: "Nota: la configurazione viene salvata solo nel DB (config/voxpopuli/voxpopuli.db).";
              Anchor: (Left: 6, Right: 6, Height: 32);
              Style: @NoteLabelStyle;
            }
          }
        }
      }

      // Placeholder tab logs
            // --- LOGS ---
      Group #LogsContent {
        FlexWeight: 1;
        LayoutMode: Top;
        Anchor: (Left: 0, Right: 0);
        Visible: false;

        Group {
          Anchor: (Left: 0, Right: 0, Height: 44);
          @SingleActionBarInner {
            #ButtonSlot {
              $C.@SecondaryTextButton #RefreshLogsButton {
                @Text = "Aggiorna";
                @Anchor = (Full: 0);
              }
            }

            #StatusSlot {
              Label #LogsStatusLabel {
                Text: "";
                Anchor: (Full: 0);
                Style: @StatusLabelStyle;
              }
            }
          }
        }

        Group { Anchor: (Height: 10); }

        Group {
          FlexWeight: 1;
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Anchor: (Left: 0, Right: 0);
          Background: @PanelBg;
          Padding: (Full: 8);

          Label #LogsText {
            Text: "";
            Anchor: (Left: 0, Right: 0, Height: 1400);
            Style: @LogsTextStyle;
          }
        }
      }

      // --- POSTS ---
      Group #PostsContent {
        FlexWeight: 1;
        LayoutMode: Top;
        Anchor: (Left: 0, Right: 0);
        Visible: false;

        Group {
          Anchor: (Left: 0, Right: 0, Height: 44);
          @SingleActionBarInner {
            #ButtonSlot {
              $C.@SecondaryTextButton #RefreshPostsButton {
                @Text = "Aggiorna";
                @Anchor = (Full: 0);
              }
            }
            #StatusSlot {
              Label #PostsStatusLabel {
                Text: "";
                Anchor: (Full: 0);
                Style: @StatusLabelStyle;
              }
            }
          }
        }

        Group { Anchor: (Height: 10); }

        Group {
          FlexWeight: 1;
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Anchor: (Left: 0, Right: 0);
          Background: @PanelBg;
          Padding: (Full: 8);

          Group #AdminPostList {
            LayoutMode: LeftCenterWrap;
            Anchor: (Left: 0, Right: 0);
          }
        }
      }

      // --- MESSAGGI ---
      Group #MessagesContent {
        FlexWeight: 1;
        LayoutMode: Top;
        Anchor: (Left: 0, Right: 0);
        Visible: false;

        Group {
          Anchor: (Left: 0, Right: 0, Height: 44);
          @SingleActionBarInner {
            #ButtonSlot {
              $C.@SecondaryTextButton #RefreshMessagesButton {
                @Text = "Aggiorna";
                @Anchor = (Full: 0);
              }
            }
            #StatusSlot {
              Label #MessagesStatusLabel {
                Text: "";
                Anchor: (Full: 0);
                Style: @StatusLabelStyle;
              }
            }
          }
        }

        Group { Anchor: (Height: 10); }

        Group {
          FlexWeight: 1;
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Anchor: (Left: 0, Right: 0);
          Background: @PanelBg;
          Padding: (Full: 8);

          Group #AdminMessageList {
            LayoutMode: LeftCenterWrap;
            Anchor: (Left: 0, Right: 0);
          }
        }
      }

      // --- GILDE ---
      Group #GuildsContent {
        FlexWeight: 1;
        LayoutMode: Top;
        Anchor: (Left: 0, Right: 0);
        Visible: false;

        Group {
          Anchor: (Left: 0, Right: 0, Height: 44);
          @SingleActionBarInner {
            #ButtonSlot {
              $C.@SecondaryTextButton #RefreshGuildsButton {
                @Text = "Aggiorna";
                @Anchor = (Full: 0);
              }
            }
            #StatusSlot {
              Label #GuildsStatusLabel {
                Text: "";
                Anchor: (Full: 0);
                Style: @StatusLabelStyle;
              }
            }
          }
        }

        Group { Anchor: (Height: 10); }

        // Lista gilde
        Group {
          FlexWeight: 1;
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Anchor: (Left: 0, Right: 0);
          Background: @PanelBg;
          Padding: (Full: 8);

          Group #AdminGuildList {
            LayoutMode: LeftCenterWrap;
            Anchor: (Left: 0, Right: 0);
          }
        }

        Group { Anchor: (Height: 10); }

        Label #SelectedGuildLabel {
          Text: "Membri gilda: (nessuna)";
          Anchor: (Height: 20);
          Style: @StatusLabelStyle;
        }

        Group { Anchor: (Height: 6); }

        // Bacheca (solo gilda selezionata)
        Group {
          Anchor: (Left: 0, Right: 0, Height: 44);
          @SingleActionBarInner {
            #ButtonSlot {
              $C.@SecondaryTextButton #RefreshGuildBoardButton {
                @Text = "Aggiorna bacheca";
                @Anchor = (Full: 0);
              }
            }
            #StatusSlot {
              Label #GuildBoardStatusLabel {
                Text: "";
                Anchor: (Full: 0);
                Style: @StatusLabelStyle;
              }
            }
          }
        }

        Group { Anchor: (Height: 10); }

        Group {
          Anchor: (Left: 0, Right: 0, Height: 220);
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Background: @PanelBg;
          Padding: (Full: 8);

          Group #AdminGuildBoardList {
            LayoutMode: LeftCenterWrap;
            Anchor: (Left: 0, Right: 0);
          }
        }

        Group { Anchor: (Height: 10); }

        // Membri gilda selezionata
        Group {
          FlexWeight: 1;
          LayoutMode: TopScrolling;
          ScrollbarStyle: $C.@DefaultScrollbarStyle;
          Anchor: (Left: 0, Right: 0);
          Background: @PanelBg;
          Padding: (Full: 8);

          Group #AdminGuildMembersList {
            LayoutMode: LeftCenterWrap;
            Anchor: (Left: 0, Right: 0);
          }
        }
      }
    }
  }
}
