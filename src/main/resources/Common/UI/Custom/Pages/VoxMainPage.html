<style>
    /* Overlay a schermo intero - più trasparente */
    .main-overlay {
        anchor-left: 0;
        anchor-right: 0;
        anchor-top: 0;
        anchor-bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        layout-mode: top;
    }

    /* Header bar */
    .header-bar {
        anchor-height: 60;
        background-color: rgba(20, 28, 38, 0.95);
        layout-mode: left;
        anchor-padding-left: 30;
        anchor-padding-right: 30;
        vertical-align: center;
    }

    .header-title {
        color: #ffffff;
        font-weight: bold;
        font-size: 20;
    }

    /* Main content container */
    .main-container {
        flex-weight: 1;
        layout-mode: left;
    }

    /* Sidebar - colonna sinistra */
    .sidebar {
        anchor-width: 280;
        background-color: rgba(20, 28, 38, 0.95);
        layout-mode: top;
        anchor-padding-left: 20;
        anchor-padding-right: 20;
        anchor-padding-top: 20;
        anchor-padding-bottom: 20;
    }

    /* Area destra - layout verticale con tab sopra */
    .right-column {
        flex-weight: 1;
        layout-mode: top;
    }

    /* Tab navigation in alto */
    .tab-nav-area {
        background-color: rgba(26, 38, 51, 0.95);
        anchor-padding-left: 20;
        anchor-padding-right: 20;
        anchor-padding-top: 15;
        anchor-padding-bottom: 15;
    }

    /* Area contenuto sotto le tab - più trasparente */
    .content-area {
        flex-weight: 1;
        layout-mode: top;
        background-color: rgba(13, 17, 23, 0.3);
        anchor-padding-left: 40;
        anchor-padding-right: 40;
        anchor-padding-top: 30;
        anchor-padding-bottom: 40;
    }

    /* Container decorato interno per le pagine */
    .decorated-content-container {
        anchor-width: 1000;
        anchor-height: 700;
        layout-mode: top;
    }

    /* Container contents che riempie il decorato */
    .decorated-inner-contents {
        layout-mode: top;
        anchor-left: 0;
        anchor-right: 0;
        anchor-top: 0;
        anchor-height: 630;
    }

    /* Sezione form fisso in alto dentro il container decorato */
    .fixed-form-section {
        anchor-padding-left: 30;
        anchor-padding-right: 30;
        anchor-padding-top: 30;
        anchor-padding-bottom: 20;
    }

    /* Sezione scrollabile per le liste dentro il container decorato */
    .scrollable-list-section {
        flex-weight: 1;
        layout-mode: topscrolling;
        anchor-padding-left: 30;
        anchor-padding-right: 30;
        anchor-padding-top: 20;
        anchor-padding-bottom: 30;
    }

    /* Stili testo */
    .txt-title {
        color: #ffffff;
        font-weight: bold;
        font-size: 28;
    }

    .txt-section-title {
        color: #e1e8f0;
        font-weight: bold;
        font-size: 16;
    }

    .txt-player-name {
        color: #ffffff;
        font-weight: bold;
        font-size: 20;
        text-align: center;
    }

    .txt-player-subtitle {
        color: #8b98ab;
        font-size: 11;
        text-align: center;
    }

    .txt-body {
        color: #c5d1de;
        font-size: 14;
    }

    .txt-muted {
        color: #8b98ab;
        font-size: 13;
    }

    .txt-small {
        color: #8b98ab;
        font-size: 11;
        text-transform: uppercase;
    }

    /* Spacers */
    .spacer-5 { anchor-height: 5; }
    .spacer-8 { anchor-height: 8; }
    .spacer-10 { anchor-height: 10; }
    .spacer-12 { anchor-height: 12; }
    .spacer-15 { anchor-height: 15; }
    .spacer-20 { anchor-height: 20; }
    .spacer-25 { anchor-height: 25; }
    .spacer-30 { anchor-height: 30; }

    .divider {
        anchor-height: 1;
        background-color: #21262d;
    }

    .divider-thick {
        anchor-height: 2;
        background-color: #21262d;
    }

    /* Avatar section */
    .avatar-section {
        layout-mode: top;
        horizontal-align: center;
        anchor-padding-bottom: 20;
    }

    /* Form section */
    .form-section {
        background-color: rgba(22, 27, 34, 0.95);
        anchor-padding-left: 20;
        anchor-padding-right: 20;
        anchor-padding-top: 18;
        anchor-padding-bottom: 18;
        layout-mode: top;
    }

    /* Post item - STILE PREMIUM */
    .post-item {
        background-color: rgba(22, 27, 34, 0.98);
        anchor-padding-left: 28;
        anchor-padding-right: 28;
        anchor-padding-top: 24;
        anchor-padding-bottom: 24;
        layout-mode: top;
    }

    .post-header {
        layout-mode: left;
        anchor-padding-bottom: 16;
    }

    .post-author-section {
        layout-mode: left;
        flex-weight: 1;
    }

    .post-author {
        color: #58a6ff;
        font-weight: bold;
        font-size: 16;
    }

    .post-author-verified {
        color: #3fb950;
        font-size: 12;
        anchor-padding-left: 6;
    }

    .post-meta-section {
        layout-mode: left;
    }

    .post-category {
        background-color: #1f6feb;
        color: #ffffff;
        font-size: 9;
        font-weight: bold;
        text-transform: uppercase;
        anchor-padding-left: 12;
        anchor-padding-right: 12;
        anchor-padding-top: 5;
        anchor-padding-bottom: 5;
    }

    .post-category-general {
        background-color: #656d76;
    }

    .post-category-quest {
        background-color: #1f6feb;
    }

    .post-category-battle {
        background-color: #da3633;
    }

    .post-category-exploration {
        background-color: #1a7f37;
    }

    .post-category-trade {
        background-color: #bf8700;
    }

    .post-category-achievement {
        background-color: #8250df;
    }

    .post-category-guild {
        background-color: #0969da;
    }

    .post-category-personal {
        background-color: #bc4c00;
    }

    .post-time {
        color: #7d8590;
        font-size: 12;
    }

    .post-content {
        color: #e6edf3;
        font-size: 15;
        anchor-padding-top: 6;
        anchor-padding-bottom: 18;
    }

    .post-footer {
        layout-mode: top;
        anchor-padding-top: 14;
        background-color: rgba(13, 17, 23, 0.4);
        anchor-padding-left: 16;
        anchor-padding-right: 16;
        anchor-padding-top: 14;
        anchor-padding-bottom: 14;
    }

    .post-stats {
        color: #7d8590;
        font-size: 13;
        anchor-padding-bottom: 14;
        layout-mode: left;
    }

    .post-stat-item {
        layout-mode: left;
        anchor-padding-right: 20;
        background-color: rgba(110, 118, 129, 0.1);
        anchor-padding-left: 10;
        anchor-padding-right: 10;
        anchor-padding-top: 6;
        anchor-padding-bottom: 6;
    }

    .post-stat-icon {
        color: #7d8590;
        font-size: 11;
        anchor-padding-right: 6;
    }

    .post-stat-value {
        color: #c9d1d9;
        font-size: 13;
        font-weight: bold;
    }

    .post-divider {
        anchor-height: 1;
        background-color: #30363d;
        anchor-padding-bottom: 14;
    }

    .post-actions {
        layout-mode: left;
    }

    /* Message item */
    .message-item {
        background-color: rgba(22, 27, 34, 0.95);
        anchor-padding-left: 20;
        anchor-padding-right: 20;
        anchor-padding-top: 14;
        anchor-padding-bottom: 14;
        layout-mode: top;
    }

    .message-unread {
        background-color: rgba(26, 31, 41, 0.95);
    }

    .message-header {
        layout-mode: left;
    }

    .message-sender {
        color: #58a6ff;
        font-weight: bold;
        font-size: 14;
    }

    .message-badge-unread {
        background-color: #1f6feb;
        color: #ffffff;
        font-size: 10;
        font-weight: bold;
        anchor-padding-left: 6;
        anchor-padding-right: 6;
        anchor-padding-top: 2;
        anchor-padding-bottom: 2;
    }

    /* Guild info */
    .guild-header-card {
        background-color: rgba(22, 27, 34, 0.95);
        anchor-padding-left: 24;
        anchor-padding-right: 24;
        anchor-padding-top: 20;
        anchor-padding-bottom: 20;
        layout-mode: top;
    }

    .guild-name {
        color: #ffffff;
        font-weight: bold;
        font-size: 20;
    }

    .guild-tag {
        color: #58a6ff;
        font-weight: bold;
        font-size: 16;
    }

    .guild-motto {
        color: #8b98ab;
        font-size: 13;
    }

    .guild-stats {
        layout-mode: left;
        anchor-padding-top: 16;
    }

    .guild-stat-item {
        flex-weight: 1;
        layout-mode: top;
        anchor-padding-right: 15;
    }

    .guild-stat-label {
        color: #8b98ab;
        font-size: 11;
        text-transform: uppercase;
    }

    .guild-stat-value {
        color: #ffffff;
        font-weight: bold;
        font-size: 18;
    }

    .guild-member-item {
        background-color: rgba(13, 17, 23, 0.95);
        anchor-padding-left: 16;
        anchor-padding-right: 16;
        anchor-padding-top: 12;
        anchor-padding-bottom: 12;
        layout-mode: left;
    }

    .guild-member-name {
        color: #c9d1d9;
        font-size: 14;
        flex-weight: 1;
    }

    .guild-member-rank {
        color: #8b98ab;
        font-size: 12;
    }

    /* Input fields */
    .text-input {
        anchor-height: 40;
        background-color: rgba(13, 17, 23, 0.95);
    }

    .text-input-multiline {
        anchor-height: 80;
        background-color: rgba(13, 17, 23, 0.95);
    }

    /* Select dropdown */
    .select-input {
        anchor-height: 40;
        anchor-width: 200;
        background-color: rgba(13, 17, 23, 0.95);
    }

    /* Buttons */
    .btn-primary {
        anchor-height: 38;
        anchor-width: 140;
    }

    .btn-small {
        anchor-height: 32;
        anchor-width: 90;
    }

    .btn-close {
        anchor-height: 38;
        anchor-width: 100;
    }

    /* Empty state */
    .empty-state {
        layout-mode: top;
        horizontal-align: center;
        anchor-padding-top: 60;
        anchor-padding-bottom: 60;
    }

    .empty-state-text {
        color: #8b98ab;
        font-size: 14;
        text-align: center;
    }

    /* Action button group */
    .button-group {
        layout-mode: left;
    }

    .button-spacer {
        anchor-width: 10;
    }
</style>

<div class="page-overlay">
    <div class="main-overlay">

        <!-- Header Bar -->
        <div class="header-bar">
            <div class="header-title">SOCIAL NETWORK</div>
            <div style="flex-weight: 1;"></div>
            <button id="btn-close" class="secondary-button btn-close">Chiudi</button>
        </div>

        <!-- Main Content -->
        <div class="main-container">

            <!-- SIDEBAR SINISTRA -->
            <div class="sidebar">
                <div class="avatar-section">
                    <hyvatar username="{{$playerName}}" render="head" size="90"></hyvatar>
                    <div class="spacer-10"></div>
                    <div class="txt-player-name">{{$playerName|upper}}</div>
                    <div class="spacer-5"></div>
                    <div class="txt-player-subtitle">Membro del Regno</div>
                </div>
            </div>

            <!-- COLONNA DESTRA -->
            <div class="right-column">

                <!-- Tab Navigation - FUORI dal container -->
                <div class="tab-nav-area">
                    <nav id="main-tabs" class="tabs"
                         data-tabs="news:Cronache,guild:Gilda,messages:Messaggi"
                         data-selected="news">
                    </nav>
                </div>

                <!-- Content Area con sfondo trasparente -->
                <div class="content-area">

                    <!-- Container Decorato per i contenuti -->
                    <div class="decorated-container decorated-content-container" data-hyui-title="">

                        <div class="container-contents decorated-inner-contents">

                            <!-- ==================== TAB: CRONACHE ==================== -->
                            <div class="tab-content" data-hyui-tab-id="news" style="layout-mode: top; flex-weight: 1;">

                                <!-- FORM NUOVO POST - FISSO IN ALTO -->
                                <div class="fixed-form-section">
                                    <div class="form-section">
                                        <div class="txt-section-title">Pubblica una nuova cronaca</div>
                                        <div class="spacer-12"></div>

                                        <input id="new-post-content" type="text" class="text-input-multiline" placeholder="Cosa vuoi condividere con il regno?" maxlength="500" />
                                        <div class="spacer-12"></div>

                                        <div style="layout-mode: left;">
                                            <select id="post-category" class="select-input">
                                                <option value="GENERAL">Generale</option>
                                                <option value="QUEST">Quest</option>
                                                <option value="BATTLE">Battaglia</option>
                                                <option value="EXPLORATION">Esplorazione</option>
                                                <option value="TRADE">Commercio</option>
                                                <option value="ACHIEVEMENT">Traguardo</option>
                                                <option value="GUILD">Gilda</option>
                                                <option value="PERSONAL">Personale</option>
                                            </select>
                                            <div class="button-spacer"></div>
                                            <button id="btn-create-post" class="secondary-button btn-primary">Pubblica</button>
                                        </div>
                                    </div>

                                    <div class="spacer-20"></div>
                                    <div class="divider-thick"></div>
                                </div>

                                <!-- LISTA POST - SCROLLABILE -->
                                <div id="chronicle-list" class="scrollable-list-section">
                                    {{#each posts}}
                                    <div class="post-item">
                                        <!-- Header del post -->
                                        <div class="post-header">
                                            <div class="post-author-section">
                                                <div class="post-author">{{$authorName}}</div>
                                            </div>
                                            <div class="post-meta-section">
                                                <div class="post-category post-category-{{$categoryLower}}">{{$category}}</div>
                                                <div style="anchor-width: 12;"></div>
                                                <div class="post-time">{{$timestamp}}</div>
                                            </div>
                                        </div>

                                        <!-- Contenuto del post -->
                                        <div class="post-content">{{$content}}</div>

                                        <!-- Footer del post -->
                                        <div class="post-footer">
                                            <!-- Statistiche -->
                                            <div class="post-stats">
                                                <div class="post-stat-item">
                                                    <div class="post-stat-icon">Mi piace</div>
                                                    <div class="post-stat-value">{{$likeCount}}</div>
                                                </div>
                                                <div class="post-stat-item">
                                                    <div class="post-stat-icon">Commenti</div>
                                                    <div class="post-stat-value">{{$commentCount}}</div>
                                                </div>
                                            </div>

                                            <!-- Divider -->
                                            <div class="post-divider"></div>

                                            <!-- Azioni -->
                                            <div class="post-actions">
                                                <button id="btn-like-{{$id}}" class="secondary-button btn-small">Mi piace</button>
                                                <div class="button-spacer"></div>
                                                <button id="btn-comment-{{$id}}" class="secondary-button btn-small">Commenta</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="spacer-15"></div>
                                    {{/each}}
                                </div>
                            </div>

                            <!-- ==================== TAB: GILDA ==================== -->
                            <div class="tab-content" data-hyui-tab-id="guild" style="flex-weight: 1;">
                                <div class="scrollable-list-section">
                                    <div id="guild-info-container" style="layout-mode: top;">
                                        {{#if hasGuild}}
                                        <!-- Header gilda -->
                                        <div class="guild-header-card">
                                            <div style="layout-mode: left;">
                                                <div class="guild-name">{{$guildName}}</div>
                                                <div style="anchor-width: 15;"></div>
                                                <div class="guild-tag">[{{$guildTag}}]</div>
                                            </div>
                                            <div class="spacer-8"></div>
                                            <div class="guild-motto">{{$guildMotto}}</div>

                                            <div class="guild-stats">
                                                <div class="guild-stat-item">
                                                    <div class="guild-stat-label">Livello</div>
                                                    <div class="spacer-5"></div>
                                                    <div class="guild-stat-value">{{$guildLevel}}</div>
                                                </div>
                                                <div class="guild-stat-item">
                                                    <div class="guild-stat-label">Membri</div>
                                                    <div class="spacer-5"></div>
                                                    <div class="guild-stat-value">{{$memberCount}}</div>
                                                </div>
                                                <div class="guild-stat-item">
                                                    <div class="guild-stat-label">Il tuo grado</div>
                                                    <div class="spacer-5"></div>
                                                    <div class="guild-stat-value">{{$playerRank}}</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="spacer-25"></div>
                                        <div class="divider-thick"></div>
                                        <div class="spacer-20"></div>
                                        <div class="txt-section-title">Membri della gilda</div>
                                        <div class="spacer-15"></div>

                                        <!-- Lista membri -->
                                        <div id="guild-members-list" style="layout-mode: top;">
                                            {{#each members}}
                                            <div class="guild-member-item">
                                                <div class="guild-member-name">{{$name}}</div>
                                                <div class="guild-member-rank">{{$rank}}</div>
                                            </div>
                                            <div class="spacer-8"></div>
                                            {{/each}}
                                        </div>

                                        {{else}}
                                        <!-- No guild state -->
                                        <div class="empty-state">
                                            <div class="empty-state-text">Non fai ancora parte di nessuna gilda</div>
                                            <div class="spacer-20"></div>
                                            <div class="button-group">
                                                <button id="btn-create-guild" class="secondary-button btn-primary">Crea Gilda</button>
                                                <div class="button-spacer"></div>
                                                <button id="btn-join-guild" class="secondary-button btn-primary">Cerca Gilda</button>
                                            </div>
                                        </div>
                                        {{/if}}
                                    </div>
                                </div>
                            </div>

                            <!-- ==================== TAB: MESSAGGI ==================== -->
                            <div class="tab-content" data-hyui-tab-id="messages" style="layout-mode: top; flex-weight: 1;">

                                <!-- FORM NUOVO MESSAGGIO - FISSO IN ALTO -->
                                <div class="fixed-form-section">
                                    <div class="form-section">
                                        <div class="txt-section-title">Invia un nuovo messaggio</div>
                                        <div class="spacer-12"></div>

                                        <input id="message-recipient" type="text" class="text-input" placeholder="Nome del destinatario" maxlength="50" />
                                        <div class="spacer-10"></div>

                                        <input id="message-content" type="text" class="text-input-multiline" placeholder="Scrivi il tuo messaggio..." maxlength="500" />
                                        <div class="spacer-12"></div>

                                        <button id="btn-send-message" class="secondary-button btn-primary">Invia Messaggio</button>
                                    </div>

                                    <div class="spacer-20"></div>
                                    <div class="divider-thick"></div>
                                    <div class="spacer-15"></div>
                                    <div class="txt-section-title">Messaggi ricevuti</div>
                                </div>

                                <!-- LISTA MESSAGGI - SCROLLABILE -->
                                <div id="messages-list" class="scrollable-list-section">
                                    {{#each messages}}
                                    <div class="message-item {{#if isUnread}}message-unread{{/if}}">
                                        <div class="message-header">
                                            <div class="message-sender">{{$senderName}}</div>
                                            {{#if isUnread}}
                                            <div class="button-spacer"></div>
                                            <div class="message-badge-unread">NUOVO</div>
                                            {{/if}}
                                            <div style="flex-weight: 1;"></div>
                                            <div class="post-time">{{$timestamp}}</div>
                                        </div>

                                        <div class="spacer-10"></div>
                                        <div class="txt-body">{{$content}}</div>

                                        <div class="spacer-12"></div>
                                        <button id="btn-reply-{{$id}}" class="secondary-button btn-small">Rispondi</button>
                                    </div>
                                    <div class="spacer-12"></div>
                                    {{/each}}
                                </div>
                            </div>

                        </div> <!-- Fine container-contents -->

                    </div> <!-- Fine decorated-container -->

                </div> <!-- Fine content-area -->

            </div> <!-- Fine right-column -->

        </div> <!-- Fine main-container -->

    </div> <!-- Fine main-overlay -->
</div> <!-- Fine page-overlay -->